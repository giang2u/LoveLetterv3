{# src/OC/PlatformBundle/Resources/views/Advert/plateau.html.twig #}

<!DOCTYPE html>
<html>
  <head>
    <title>Bienvenue sur LoveLetter !</title>
  </head>
  <body>
    <h1 align="middle" >Plateau de jeu</h1>
		
		<div id="joueur2" align="middle">
			PLAYER 2
			<br>
		</div>
		<div id="plateau" style="background-image: url({{ asset(plateau) }}); float:center ; background-size: cover ; margin-right:100px; margin-left:100px" >

			<div id="terrainP2" style=" width: cover; height: 200px; padding: 10px; border: 1px solid #aaaaaa;" "  ondrop="drop(event)" ondragover="allowDrop(event)" ></div>


			<img src="{{ asset(first) }}" align="center" height = 200  width = 150 alt="first" style="margin-top: 200px ; margin-bottom: 200px;"/>
			<img src="{{ asset(second) }}" align="center" height = 200  width = 150 alt="second" style="margin-top: 200px; margin-bottom: 200px;"/>
			<img src="{{ asset(trois) }}" align="center" height = 200  width = 150 alt="trois" style="margin-top: 200px; margin-bottom: 200px;"/>


			<img src="{{ asset(verso) }}" align="center" height = 200  width = 150 alt="verso" style="margin-top: 200px; margin-bottom: 200px; float:right;" onclick="tirerCarte()"/>

			<input type="image" value="Endtour" style="margin-top: 300px; margin-bottom: 150px ; float:right;" src = "/LoveLetterv3/LoveLetter/web/img/end.png"  onclick="findutour()" />


			<div id="terrainP1" style=" width: cover; height: 200px; padding: 10px; border: 1px solid #aaaaaa;"  ondrop="drop(event)" ondragover="allowDrop(event)" ></div>

		</div>

		<div id = "joueur1" align="middle"> 
			PLAYER 1
			<br>
		</div>
		
		
		{% set pioche = 3 %}
		
		
		{% block javascripts %}
		
		
		<script src="/LoveLetterv3/LoveLetter/web/jquery-3_2_1.js"></script>
		<script>
						
						
				/*document.getElementById('joueur1').innerHTML += '<img src="'+n[3]+'" width="150" height="200" />';
				document.getElementById('joueur2').innerHTML += '<img src="'+n[4]+'" width="150" height="200" />';*/
				
				i = 1;
				pioche = 5;
				piocher = false;

				
					


				
				var n = [];
				 {% for item1 in deck %}
					n.push( "{{ item1 }}" );
				{% endfor %}
		
				function tirerCarte(){
				
				if (pioche <= 15)  {
				
				//var po = "/LoveLetterv3/LoveLetter/web/"+n[pioche];
				
				//alert( n[pioche] );
				
					//var po = "/LoveLetterv3/LoveLetter/web/"+n[pioche];
					
					//alert( n[pioche] );
					
					//alert ( po );
						
						if (i%2 == 0 && !piocher) {	

						document.getElementById('joueur2').innerHTML += '<img id ="'+pioche+'" src="'+n[pioche]+'" draggable="true" ondragstart="drag(event)" width="150" height="200" " />';
						alert('<img id = "'+pioche+'" src="'+n[pioche]+'" draggable="true" ondragstart="drag(event)" width="150" height="200" " />');
							piocher = true;
						pioche++;
							
										manche = {{ id_manche }};
										$.ajax( {
										   url : 'carteController.php',
										   type : 'POST',
										   data : 	'nom_carte=' + nom[pioche] + '&idjoueur='+ 1 + '&id_manche=' + manche,
										   success : function(code_html, statut){
											   alert("youpi"); // On passe code_html à jQuery() qui va nous créer l'arbre DOM !
										   },
										   error : function(resultat, statut, erreur){
										   },
										   complete : function(resultat, statut){
										   alert( "reussi");
										   }

										});
						}
						
						if (i%2 == 1 && !piocher) {
							document.getElementById('joueur1').innerHTML += '<img id = "'+pioche+'" src="'+n[pioche]+'" draggable="true" ondragstart="drag(event)" width="150" height="200" " />';
						alert('<img id = "'+pioche+'" src="'+n[pioche]+'" draggable="true" ondragstart="drag(event)" width="150" height="200" " />');

						
						piocher = true;
						pioche++;
						}
					
					}
				};
			
			
			function findutour(){
				i++;
				piocher = false;
			};

			function allowDrop(ev) {
			    ev.preventDefault();
			}

			function drag(ev) {
			    ev.dataTransfer.setData("text", ev.target.id);
			}

			function drop(ev) {
			    ev.preventDefault();
			    var data = ev.dataTransfer.getData("text");
			    ev.target.appendChild(document.getElementById(data));
			}


			
		</script>
		
		{% endblock %}
  </body>
</html>
